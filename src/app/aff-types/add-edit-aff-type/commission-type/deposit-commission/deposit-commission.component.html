<form [formGroup]="affTypeFormCommissionTypeDepositCommission">
  <div class="form-element">
    <section class="checkbox">
      <mat-checkbox formControlName="depositCommission" #depositCommission class="main-checkbox"
        >Per Deposit Commissions
      </mat-checkbox>
    </section>
    <div class="nested-div">
      <div class="form-element" *ngIf="depositCommission.checked">
        <mat-form-field class="" color="primary" appearance="outline">
          <mat-label class="label"></mat-label>
          <mat-select formControlName="commissionDropDown" #commissionDropDown placeholder="Please choose">
            <mat-option
            *ngFor="let commission of commissions"
              [value]="commission.value"
            >
              {{ commission.viewValue }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- NESTED -->
        <div class="form-element" *ngIf="commissionDropDown.value === 'CPA'">
          <div class="">
            <mat-form-field
              class="nested-field"
              color="primary"
              appearance="outline"
            >
              <mat-label>From 1 to</mat-label>
              <input
                type="number"
                matInput
                placeholder=""
                formControlName="depositCommissionCPA1"
                matTooltip="Up to 999"
                [(ngModel)]="firstDCvalue"
              />
            </mat-form-field>
            FTDs =
            <mat-form-field class="nested-field" appearance="outline">
              <mat-label></mat-label>
              <input
                type="number"
                matInput
                placeholder=""
                formControlName="depositCommissionCPA1B"
              /><span matTextPrefix>$&nbsp;</span>
            </mat-form-field>
          </div>

          <div class="">
            <mat-form-field
              class="nested-field"
              color="primary"
              appearance="outline"
            >
              <mat-label>From {{ firstDCvalue }} to</mat-label>
              <input
                type="number"
                matInput
                placeholder=""
                max="999"
                formControlName="depositCommissionCPA2"
                matTooltip="Up to 999"
                [(ngModel)]="secondDCvalue"
              />
            </mat-form-field>
            FTDs =
            <mat-form-field
              class="nested-field"
              color="primary"
              appearance="outline"
            >
              <mat-label></mat-label>
              <input
                type="number"
                matInput
                placeholder=""
                formControlName="depositCommissionCPA2B"
              /><span matTextPrefix>$&nbsp;</span>
            </mat-form-field>
          </div>

          <div class="">
            <mat-form-field
              class="nested-field"
              color="primary"
              appearance="outline"
            >
              <mat-label>From {{ secondDCvalue }} to</mat-label>
              <input
                type="number"
                matInput
                placeholder=""
                max="999"
                formControlName="depositCommissionCPA3"
                matTooltip="Up to 999"
                [(ngModel)]="thirdDCvalue"
              />
            </mat-form-field>
            FTDs =
            <mat-form-field
              class="nested-field"
              color="primary"
              appearance="outline"
            >
              <mat-label></mat-label>
              <input
                type="number"
                matInput
                placeholder=""
                formControlName="depositCommissionCPA3B"
              /><span matTextPrefix>$&nbsp;</span>
            </mat-form-field>
          </div>

          <div class="">
            From {{ thirdDCvalue }} and above FTDs =
            <mat-form-field
              class="nested-field"
              color="primary"
              appearance="outline"
            >
              <mat-label></mat-label>
              <input
                type="number"
                matInput
                placeholder=""
                max="999"
                formControlName="depositCommissionCPA4"
              /><span matTextPrefix>$&nbsp;</span>
            </mat-form-field>
          </div>
        </div>
        <!-- end of NESTED -->

        <!-- NESTED -->
        <div class="form-element" *ngIf="commissionDropDown.value === 'CPAD'">
          <div class="divider-container"><hr class="sub-divider" /></div>
          <div class="sub-section">
            <div class="box-title">CPAD</div>
            <div class="container-div">
              <span class="nested-label">From 1 and above FTDs =</span>
              <mat-form-field
                class="nested-field"
                color="primary"
                appearance="outline"
              >
                <mat-label class="label"></mat-label>
                <input
                  type="number"
                  matInput
                  placeholder=""
                  max="999"
                  formControlName="depositCommissionCPAD1"
                /><span matTextPrefix>$&nbsp;</span>
              </mat-form-field>
            </div>
            <div class="container-div">
              <span class="nested-label">Percent of deposit</span
              ><mat-form-field
                class="nested-field"
                color="primary"
                appearance="outline"
              >
                <mat-label class="label"></mat-label>
                <input
                  type="number"
                  matInput
                  formControlName="depositCommissionCPAD2"
                  matTooltip="1 for 100%, 0.2 for 20%"
                />
              </mat-form-field>
            </div>
          </div>

          <div class="divider-container"><hr class="sub-divider" /></div>
          <div class="sub-section">
            <div class="box-title">CPA/CPAD Minimum Commissions</div>
            <div class="container-div">
              <!--FIX: in the original form this is disabled ???-->
              <span class="nested-label">Minimum Commission per Trade</span
              ><mat-form-field
                class="nested-field"
                color="primary"
                appearance="outline"
              >
                <mat-label class="label"></mat-label>
                <input
                  type="number"
                  matInput
                  placeholder=""
                  max="999"
                  formControlName="depositCommissionCPAD3"
                /><span matTextPrefix>$&nbsp;</span>
              </mat-form-field>
            </div>
          </div>

          <div class="divider-container"><hr class="sub-divider" /></div>
          <div class="sub-section">
            <div class="box-title">CPA/CPAD Per Country Extra Plans</div>
            <div class="inner-text">
              Add CPA/CPAD Per Country Extra Plan (Up to 4 Extra Plans Can be
              Added)
            </div>

            <!-- Button -->
            <div class="inner-btn">
              <button
                type="button"
                #extraPlanBtn
                [disabled]="
                  clickedNewExtraPlanBtn === contentNewExtraPlan.length
                "
                mat-button
                class="add-btn"
                (click)="onClickExtraPlanBtn()"
                appearance="outline"
              >
                Add New Extra Plan
              </button>
            </div>

            <!-- when clicked on inner btn -->
            <div
              class="form-element"
              *ngFor="let extraPlanOption of extraPlanOptions"
            >
              <div class="">
                <div class="sub-title">
                  Select {{ extraPlanOption.blockNumber }} Extra Plan Countries:
                </div>
                <div class="">
                  <div class="">
                    <mat-form-field
                      class="field nested-field"
                      color="primary"
                      appearance="outline"
                    >
                      <mat-label class="label">From 1 to</mat-label>
                      <input
                        type="number"
                        matInput
                        placeholder=""
                        formControlName="extraPlanCountries1"
                        matTooltip="Up to 999"
                        [(ngModel)]="firstEPCvalue"
                        appearance="outline"
                      />
                    </mat-form-field>
                    FTDs =
                    <mat-form-field
                      class="field nested-field"
                      color="primary"
                      appearance="outline"
                    >
                      <mat-label class="label"></mat-label>
                      <input
                        type="number"
                        matInput
                        placeholder=""
                        formControlName="extraPlanCountries1B"
                        appearance="outline"
                      /><span matTextPrefix>$&nbsp;</span>
                    </mat-form-field>
                  </div>

                  <div class="">
                    <mat-form-field
                      class="field nested-field"
                      color="primary"
                      appearance="outline"
                    >
                      <mat-label class="label"
                        >From {{ firstEPCvalue }} to</mat-label
                      >
                      <input
                        type="number"
                        matInput
                        placeholder=""
                        formControlName="extraPlanCountries2"
                        matTooltip="Up to 999"
                        appearance="outline"
                        [(ngModel)]="secondEPCvalue"
                      />
                    </mat-form-field>
                    FTDs =
                    <mat-form-field
                      class="field nested-field"
                      color="primary"
                      appearance="outline"
                    >
                      <mat-label class="label"></mat-label>
                      <input
                        type="number"
                        matInput
                        placeholder=""
                        appearance="outline"
                        formControlName="extraPlanCountries2B"
                      /><span matTextPrefix>$&nbsp;</span>
                    </mat-form-field>
                  </div>

                  <div class="">
                    
                    <mat-form-field
                      class="field nested-field"
                      color="primary"
                      appearance="outline"
                    >
                      <mat-label class="label">From {{ secondEPCvalue }} to</mat-label>
                      <input
                        type="number"
                        matInput
                        placeholder=""
                        formControlName="extraPlanCountries3"
                        matTooltip="Up to 999"
                        [(ngModel)]="thirdEPCvalue"
                        appearance="outline"
                      />
                    </mat-form-field>
                    FTDs =
                    <mat-form-field
                      class="field nested-field"
                      color="primary"
                      appearance="outline"
                    >
                      <mat-label class="label"></mat-label>
                      <input
                        type="number"
                        matInput
                        placeholder=""
                        formControlName="extraPlanCountries3B"
                        appearance="outline"
                      /><span matTextPrefix>$&nbsp;</span>
                    </mat-form-field>
                  </div>

                  <div class="">
                    From {{ thirdEPCvalue }} and above FTDs =
                    <mat-form-field
                      class="field nested-field"
                      color="primary"
                      appearance="outline"
                    >
                      <mat-label class="label"></mat-label>
                      <input
                        type="number"
                        matInput
                        placeholder=""
                        max="999"
                        formControlName="extraPlanCountries4"
                        appearance="outline"
                      /><span matTextPrefix>$&nbsp;</span>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>
            <!-- end of NESTED -->
          </div>
        </div>
        <!-- end of NESTED -->

        <div class="form-element" *ngIf="commissionDropDown.selected">
          <div class="divider-container"><hr class="sub-divider" /></div>
          <section class="checkbox nested-checkbox">
            <mat-checkbox formControlName="openPositionReq"
              >Open Position Required</mat-checkbox
            >
          </section>
        </div>
      </div>
    </div>
  </div>
</form>
